# SODC User Mutations

# Create or update a user profile based on their auth.uid
# The "auth.uid" server value ensures that users can only register/update their own profile.
# This mutation will create the user if they don't exist, or update if they do.
mutation UpsertUser(
  $firstName: String!
  $lastName: String!
  $email: String!
  $serviceNumber: String!
) @auth(level: USER) {
  user_upsert(
    data: {
      id_expr: "auth.uid"
      firstName: $firstName
      lastName: $lastName
      email: $email
      serviceNumber: $serviceNumber
      # createdAt, updatedAt, createdBy, and updatedBy are set automatically via defaults
    }
  )
}
